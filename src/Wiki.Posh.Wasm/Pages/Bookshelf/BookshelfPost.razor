@page "/bookshelf/{postId}"
@using System.Reflection
@using Microsoft.AspNetCore.Components

<MudMarkdown Value="@Content" />

@code {

    [Parameter] public string PostId { get; set; } = string.Empty;
    public string Content { get; set; } = string.Empty;
    
    protected override void OnInitialized()
    {
        Assembly assembly = Assembly.GetExecutingAssembly();
        string[] resourceNames = assembly.GetManifestResourceNames();
        string? resourceName = resourceNames
            .FirstOrDefault(x => x.EndsWith(PostId, StringComparison.InvariantCultureIgnoreCase));

        if (resourceName is null)
        {
            return;
        }

        using var stream = assembly.GetManifestResourceStream(resourceName);
        if (stream is null)
        {
            return;
        }
        
        using var reader = new StreamReader(stream);
        Content = reader.ReadToEnd();
        
        base.OnInitialized();
    }

}